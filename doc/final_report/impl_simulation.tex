To verify that our system is working properly in the distributed IoT framework~\cite{campbell}. A simulation environment is implemented. This environment simulates the messaging and encryption protocol between data owner and other entities, following the instruction shown by Fig.~\ref{fig:mes_protocol}. Because the main goal of this simulation environment is to verify our implementation on the data-owner side, components that do not directly interact with the data owner are not implemented. 
In the simulation, the data owner hosts a http server on AWS cloud, data requester and data source run on local virtual machines. To transmit information to the data owner, data requester and data source make post requests to the public URL (/dmp) provided by the data owner. All messages are encrypted using the messaging protocol shown in Fig.~\ref{fig:mes_protocol} with some modifications to fit our need. The encryption is done with python library pycrypto. Because some of the messages are too large to be encrypted or signed using RSA cryptography, we adopted the method of symmetric encryption. In this method, the messages are encrypted using a AES key, the AES key itself is then encrypted using the public key of the data owner and included in the message packet. After the data owner receives the message packet, it uses its private key to decrypt the AES key, and then decrypt the payload of the packet. The message packet also contains a field that labels the message to be one from Fig.~\ref{fig:mes_protocol} so that the data owner knows what information it can expect from this message packet. For more details of the simulation environment, please refer to the source code.
